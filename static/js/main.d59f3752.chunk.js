(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,n){"use strict";(function(e){var a=n(1),s=n(2),i=n(55),o=n.n(i),r=null,l={type:"devices",filter:"all",order:"Name"},c={type:"scenes"},u=function(){function t(){var n=this;return Object(a.a)(this,t),this.getAllScenesThrottled=function(t){n.throttleTimeout_||(n.getAllScenes(t),n.throttleTimeout_=e.setTimeout(function(){n.throttleTimeout_=null},500))},this.getAllScenes=function(e){n.get(c,e)},r||(this.throttleTimeout_=null,this.debounceErrors_=!1,this.isConnected=!1,this.eventHandler=function(e,t){},r=this)}return Object(s.a)(t,[{key:"setEventHandler",value:function(e){this.eventHandler=e}},{key:"setServerUrl",value:function(e,t,n){var a=this;this.serverUrl=e,this.axiosConfig={},t&&n&&(this.axiosConfig.auth={username:t,password:n}),o.a.head(this.serverUrl+"/json.htm",this.axiosConfig).then(function(e){a.setConnected_(!0)}).catch(function(e){a.setConnected_(!1)})}},{key:"getAllDevices",value:function(e){this.get(l,e)}},{key:"objectToQuery",value:function(e){var t=[];for(var n in e)({}).hasOwnProperty.call(e,n)&&t.push(n+"="+encodeURIComponent(e[n]));return t.join("&")}},{key:"get",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(t){"OK"!==t.status&&console.log("JSON query failed",e)};this.serverUrl?o.a.get(this.serverUrl+"/json.htm?"+this.objectToQuery(e),this.axiosConfig).then(function(e){n(e.data)}).catch(function(e){t.debounceErrors_||(alert("Unable to reach Domoticz server.\n\nPlease check your Domoticz server URL in the settings and make sure Domoticz is online."),window.setTimeout(function(){return t.debounceErrors_=!1},3e3),t.debounceErrors_=!0),console.log("Unable to reach Domoticz",e)}):console.log("Server URL is not set, please check the settings")}},{key:"setConnected_",value:function(e){this.isConnected=e,this.eventHandler("connected",this.isConnected)}}]),t}();t.a=u}).call(this,n(6))},104:function(e,t,n){"use strict";(function(e){var a=n(1),s=n(2),i=n(5),o=n(3),r=n(4),l=n(0),c=n.n(l),u=n(33),h=n.n(u),p=n(105),d=n(106),m=n(54),g=n.n(m),f=n(19),v=n(34),b=n.n(v),y=(n(137),60),O={delay:-1,type:f.a.BLANK},k=function(t){function n(t){var s;return Object(a.a)(this,n),(s=Object(i.a)(this,Object(o.a)(n).call(this,t))).handleDashboardCheckChange=function(e){s.setState({exportDashboard:e.target.checked})},s.handleZoomChange=function(e){s.props.onZoomChange&&s.props.onZoomChange(e.target.value)},s.handleToggleScreensaver=function(e){var t=Object.assign({},s.props.screensaverConfig||O);t.delay=e.target.checked?y:-1,s.props.onScreensaverConfigChange&&s.props.onScreensaverConfigChange(t)},s.handleChangeScreensaverDelay=function(e){var t=Object.assign({},s.props.screensaverConfig||O);t.delay=e.target.value,s.props.onScreensaverConfigChange&&s.props.onScreensaverConfigChange(t)},s.handleChangeScreensaverType=function(e){var t=Object.assign({},s.props.screensaverConfig||O);t.type=e.target.value,s.props.onScreensaverConfigChange&&s.props.onScreensaverConfigChange(t)},s.generateExportUrl=function(){var e={s:s.props.appState&&s.props.appState.serverConfig,t:s.props.appState&&s.props.appState.themeId};if(s.state.exportDashboard){e.w=s.props.appState.whitelist;for(var t=s.props.appState.layout.concat([]),n=0;n<t.length;n++)delete t[n].moved,delete t[n].static;e.l=t,e.n=s.props.configName}return document.location.href.split("?")[0].replace("#","")+"#"+h.a.compressToEncodedURIComponent(JSON.stringify(e))},s.handleFocus=function(e){g()(e.target)},s.copyUrl=function(){e.clearTimeout(s.state.copyResultTimeoutId),g()(s.refs.url);var t=!1;try{t=document.execCommand("copy")}catch(n){console.log("Unable to copy",n)}s.refs.url.blur(),s.setState({copyResult:t?"Copied!":"Failed! Use Ctrl+C",copyResultTimeoutId:e.setTimeout(function(){s.setState({copyResult:null})},3e3)})},s.state={copyResultTimeoutId:null,copyResult:null,exportDashboard:!1,exportUrl:""},s}return Object(r.a)(n,t),Object(s.a)(n,[{key:"componentWillUnmount",value:function(){window.clearTimeout(this.state.copyResultTimeoutId)}},{key:"render",value:function(){var e=this.generateExportUrl(),t=this.props.screensaverConfig||O,n=t.delay>=0;return c.a.createElement("div",{className:"AboutView"},c.a.createElement("div",{className:"aboutHeader"},c.a.createElement("img",{src:b.a,alt:"Reacticz logo"}),c.a.createElement("div",null,c.a.createElement("h1",null,"Reacticz v",d.version)," - ",c.a.createElement("a",{href:"https://github.com/domoticz/Reacticz",target:"_blank",rel:"noopener noreferrer"},"GitHub"),c.a.createElement("aside",null,"A minimalistic Domoticz dashboard"))),c.a.createElement("section",null,c.a.createElement("h2",null,"Interface settings"),c.a.createElement("p",null,"Color theme: ",c.a.createElement(p.a,{themes:this.props.themes,currentTheme:this.props.appState&&this.props.appState.themeId,onThemeChange:this.props.onThemeChange})),c.a.createElement("p",null,"Font size: ",c.a.createElement("span",{className:"zoomlabel"},"Smaller"),c.a.createElement("input",{className:"zoomrange",type:"range",min:"0.7",max:"1.3",value:this.props.zoom,step:"0.1",onChange:this.handleZoomChange}),c.a.createElement("span",{className:"zoomlabel"},"Bigger")),c.a.createElement("p",null,c.a.createElement("label",{htmlFor:"toggleScreensaver"},"Screensaver: "),c.a.createElement("input",{id:"toggleScreensaver",type:"checkbox",onChange:this.handleToggleScreensaver,checked:n}),n&&c.a.createElement("span",null,c.a.createElement("input",{type:"number",max:"3600",min:"1",step:"1",value:t.delay,id:"delayInput",onChange:this.handleChangeScreensaverDelay})," ",c.a.createElement("label",{htmlFor:"delayInput"},"seconds"),",\xa0",c.a.createElement("label",{htmlFor:"screensaverType"},"type: "),c.a.createElement("select",{id:"screensaverType",onChange:this.handleChangeScreensaverType,value:t.type},c.a.createElement("option",{value:f.a.BLANK},"Blank"),c.a.createElement("option",{value:f.a.CLOCK},"Analog clock")))),c.a.createElement("p",null,c.a.createElement("a",{href:"."},"Reload"))),c.a.createElement("section",null,c.a.createElement("h2",null,"Export configuration"),c.a.createElement("p",null,"To clone your settings to another device, share the URL below."),c.a.createElement("div",{className:"exportOptions"},c.a.createElement("label",null,c.a.createElement("input",{type:"checkbox",checked:this.state.exportDashboard,onChange:this.handleDashboardCheckChange})," include dashboard layout",this.props.multiConfig&&" ("+this.props.configName+")")),c.a.createElement("div",{className:"exportUrl"},c.a.createElement("input",{type:"text",className:"url",ref:"url",value:e,onFocus:this.handleFocus,readOnly:!0}),c.a.createElement("button",{onClick:this.copyUrl},this.state.copyResult||"Copy to Clipboard")),this.props.multiConfig&&this.state.exportDashboard&&c.a.createElement("em",null,"Tip: repeat the operation with your other dashboards to add them too (they won't overwrite each other).")))}}]),n}(l.Component);t.a=k}).call(this,n(6))},105:function(e,t,n){"use strict";var a=n(1),s=n(2),i=n(5),o=n(3),r=n(4),l=n(0),c=n.n(l),u=function(e){function t(){var e,n;Object(a.a)(this,t);for(var s=arguments.length,r=new Array(s),l=0;l<s;l++)r[l]=arguments[l];return(n=Object(i.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(r)))).onChange=function(e){n.props.onThemeChange(e.target.value)},n}return Object(r.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=[];for(var t in this.props.themes)({}).hasOwnProperty.call(this.props.themes,t)&&e.push(t);var n=e.map(function(e){return c.a.createElement("option",{key:e,value:e},e)},this);return c.a.createElement("select",{className:"ThemeSelector",onChange:this.onChange,value:this.props.currentTheme},n)}}]),t}(l.Component);t.a=u},106:function(e){e.exports={name:"reacticz",version:"0.1.26",license:"Apache-2.0",repository:{type:"git",url:"https://github.com/domoticz/Reacticz.git"},homepage:"http://reacticz.t0m.fr",devDependencies:{"axios-mock-adapter":"^1.10.0",enzyme:"^3.10.0","enzyme-adapter-react-16":"^1.14.0","gh-pages":"^2.0.1","react-addons-test-utils":"^15.6.2","react-scripts":"^3.0.1"},dependencies:{axios:"^0.19.0","lz-string":"^1.4.4",mqtt:"^2.14.0",react:"^16.2.0","react-clock":"^2.3.0","react-dom":"^16.2.0","react-grid-layout":"^0.16.0","sanitize-html":"^1.16.1",select:"^1.1.2"},scripts:{start:"react-scripts start",build:"react-scripts build",test:"react-scripts test --env=jsdom","ci-test":"CI=true react-scripts test --env=jsdom --forceExit",eject:"react-scripts eject",deploy:"gh-pages -d build"},browserslist:{production:[">0.2%","not dead","not op_mini all"],development:["last 1 chrome version","last 1 firefox version","last 1 safari version"]}}},109:function(e,t,n){e.exports=n(258)},136:function(e,t,n){},137:function(e,t,n){},154:function(e,t,n){},163:function(e,t){},172:function(e,t){},19:function(e,t,n){"use strict";n.d(t,"a",function(){return m});var a=n(1),s=n(2),i=n(5),o=n(3),r=n(4),l=n(0),c=n.n(l),u=n(107),h=n.n(u),p=(n(136),["touchstart","touchmove","mousedown","mousemove","click"]),d=350,m={CLOCK:"clock",BLANK:"blank"},g=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(i.a)(this,Object(o.a)(t).call(this,e))).stopTimer=function(){window.clearTimeout(n.state.activityTimeoutId)},n.restartTimer=function(){n.stopTimer(),n.props.delay&&n.setState({activityTimeoutId:window.setTimeout(n.show,1e3*n.props.delay)})},n.show=function(){n.setState({visible:!0})},n.onMove=function(e){n.state.visible&&(e.stopPropagation(),e.preventDefault()),n.stopTimer(),n.setState({debounceTimeoutId:window.setTimeout(function(){n.unmounted||(n.restartTimer(),n.setState({visible:!1}))},d)})},n.state={visible:!1,activityTimeoutId:null,date:new Date,dateIntervalId:null,debounceTimeoutId:null,size:.6*Math.min(window.innerHeight,window.innerWidth)},n.unmounted=!1,n}return Object(r.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e=this;for(var t in p)window.addEventListener(p[t],this.onMove,{passive:!1});this.setState({dateIntervalId:window.setInterval(function(){return e.setState({date:new Date})},1e3)}),this.restartTimer()}},{key:"componentWillUnmount",value:function(){for(var e in this.unmounted=!0,this.stopTimer(),window.clearTimeout(this.state.debounceTimeoutId),window.clearInterval(this.state.dateIntervalId),p)window.removeEventListener(p[e],this.onMove,{passive:!1})}},{key:"render",value:function(){return this.state.visible?c.a.createElement("div",{className:"Screensaver",style:{backgroundColor:this.props.type===m.CLOCK?this.props.theme.appBackground:""}},this.props.type===m.CLOCK&&c.a.createElement(h.a,{className:"Clock",value:this.state.date,size:this.state.size,hourHandLength:60,hourHandOppositeLength:20,hourHandWidth:8,hourMarksLength:20,hourMarksWidth:8,minuteHandLength:90,minuteHandOppositeLength:20,minuteHandWidth:6,minuteMarksLength:6,minuteMarksWidth:3,secondHandLength:75,secondHandOppositeLength:25,secondHandWidth:3})):null}}]),t}(l.Component);t.b=g},194:function(e,t){},203:function(e,t){},210:function(e,t,n){},211:function(e,t,n){},212:function(e,t,n){},213:function(e,t,n){},214:function(e,t,n){},233:function(e,t){},234:function(e,t){},238:function(e,t,n){},239:function(e,t,n){},240:function(e,t,n){},241:function(e,t,n){},242:function(e,t,n){},243:function(e,t,n){},244:function(e,t,n){},245:function(e,t,n){},246:function(e,t,n){},247:function(e,t,n){},248:function(e,t,n){},249:function(e,t,n){},250:function(e,t,n){},251:function(e,t,n){},252:function(e,t,n){},253:function(e,t,n){},254:function(e,t,n){},257:function(e,t,n){},258:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),i=n(17),o=n.n(i),r=n(1),l=n(2),c=n(5),u=n(3),h=n(18),p=n(4),d=n(53),m=n(104),g=n(35),f=function(){function e(){Object(r.a)(this,e),this.configs_=null,this.store=new g.a,this.migrateConfigs()}return Object(l.a)(e,[{key:"getConfigs",value:function(){return this.configs_||(this.configs_=this.store.read("configs")||[]),this.configs_}},{key:"setConfigs",value:function(e){this.store.write("configs",e),this.configs_=e}},{key:"getConfig",value:function(e){return this.getConfigs()[e]}},{key:"getNextId",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.getConfigs();return n.length<=1?null:t?0===e?n.length-1:e-1:e===n.length-1?0:e+1}},{key:"storeConfigChange",value:function(e,t){var n=this.getConfigs().slice(0),a=n[e]||{},s=Object.assign(a,t);n[e]=s,this.setConfigs(n)}},{key:"deleteConfig",value:function(e){var t=this.getConfigs().slice(0);t.splice(e,1),this.setConfigs(t)}},{key:"addConfig",value:function(e){var t=this.getConfigs().slice(0),n=t.length,a=e||{name:"Dashboard "+n,layout:[],whitelist:[]};return t.push(a),this.setConfigs(t),n}},{key:"migrateConfigs",value:function(){var e=this.store.getKeys().filter(function(e){return 0===e.indexOf("layout")});if(!(0===e.length||this.getConfigs().length>0)){for(var t=[],n=0;n<e.length;n++){var a=e[n].substring(6),s={},i=this.store.read("layout"+a);i&&(s.layout=i,this.store.delete("layout"+a));var o=this.store.read("whitelist"+a);o&&(s.whitelist=o,this.store.delete("whitelist"+a)),(s.whitelist||s.layout)&&(s.name="Dashboard"+(a?" "+a:""),t.push(s))}console.log("Migrated "+e.length+" layout configuration(s)."),this.store.write("configs",t),document.location.reload()}}}]),e}(),v=n(10),b=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleSelect=function(e){if("none"!==e.target.value&&(!n.props.needConfirm||window.confirm("Replace current selection with the devices of this room ?"))){n.props.onWhitelistChange([]);var t={type:"command",param:"getplandevices",idx:e.target.value};n.json.get(t,function(e){var t=[];if(e.result)for(var a=0;a<e.result.length;a++)t.push(n.getUid(e.result[a]));n.props.onWhitelistChange(t)})}},n.state={names:[],idx:[],sceneIds:[]},n.json=new v.a,n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.json.get({type:"plans",order:"name",used:"true"},function(t){if("OK"===t.status){if(t.result){for(var n=[],a=[],s=0;s<t.result.length;s++)n.push(t.result[s].Name),a.push(t.result[s].idx);e.setState({names:n,idx:a})}}else alert("Unable to get floor plans.")}),this.json.getAllScenes(function(t){if("OK"===t.status){if(t.result){for(var n=t.result,a=[],s=0;s<n.length;s++){var i=n[s],o=("Group"===i.Type?"g":"s")+"|"+i.idx;a.push(o)}e.setState({sceneIds:a})}}else alert("Unable to get scenes status.")})}},{key:"getUid",value:function(e){if(1===e.type){var t="s|"+e.devidx;if(this.state.sceneIds.indexOf(t)>=0)return t;var n="g|"+e.devidx;if(this.state.sceneIds.indexOf(n)>=0)return n;alert("Unknown scene id: "+e.devidx)}return"d|"+e.devidx}},{key:"render",value:function(){var e=[];if(this.state.idx.length){e.push(s.a.createElement("option",{key:"nofp",value:"none"},"select by room plan"));for(var t=0;t<this.state.idx.length;t++){var n=this.state.idx[t];e.push(s.a.createElement("option",{key:"fp"+n,value:n},this.state.names[t]))}}return s.a.createElement("span",null,e.length?s.a.createElement("span",null,", or ",s.a.createElement("select",{value:"none",onChange:this.handleSelect},e)):"")}}]),t}(a.Component),y=(n(154),function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleListChange=function(e){var t=e.target;if(t.checked&&n.props.idxWhitelist.indexOf(t.value)<0)n.props.onWhitelistChange(n.props.idxWhitelist.concat([t.value]));else{var a=n.props.idxWhitelist.slice(0);a.splice(n.props.idxWhitelist.indexOf(t.value),1),n.props.onWhitelistChange(a)}},n.handleUnusedFilterChange=function(e){var t=e.target;n.setState({showUnused:t&&t.checked})},n.handleNameChange=function(e){var t=e.target.value;n.props.onNameChange(t)},n.handleFilterChange=function(e){var t=e.target.value;n.setState({filter:t})},n.clearFilter=function(){n.setState({filter:""})},n.addDevices=function(e){for(var t=Object.assign({},n.state.devices),a=n.state.deviceTypes,s=0;s<e.result.length;s++){var i=e.result[s].Type;t[i]||(t[i]=[],a.push(i)),t[i].push(e.result[s])}n.setState({deviceTypes:a.sort(),devices:t})},n.state={deviceTypes:[],devices:{},filter:"",showUnused:!1},n.json=new v.a,n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.json.getAllDevices(this.addDevices),this.json.getAllScenes(this.addDevices)}},{key:"getUid",value:function(e){switch(e.Type){case"Scene":return"s|"+e.idx;case"Group":return"g|"+e.idx;default:return"d|"+e.idx}}},{key:"renderDeviceTypeSection",value:function(e){var t=this.state.devices[e],n=!1,a=t.sort(function(e,t){return t.Name>=e.Name?-1:1}).map(function(e){var t=this.getUid(e);return escape(e.Name).toLowerCase().match(escape(this.state.filter).toLowerCase())&&(this.state.showUnused||0!==e.Used)?(n=!0,s.a.createElement("li",{key:t,className:0===e.Used?"unused":""},s.a.createElement("label",null,s.a.createElement("input",{type:"checkbox",value:t,onChange:this.handleListChange,checked:this.props.idxWhitelist.indexOf(t)>=0}),e.Name))):null},this);return n?s.a.createElement("section",{key:e},s.a.createElement("h3",null,e),s.a.createElement("ul",null,a)):null}},{key:"render",value:function(){for(var e=[],t=0;t<this.state.deviceTypes.length;t++)e.push(this.renderDeviceTypeSection(this.state.deviceTypes[t]));return s.a.createElement("div",{className:"DeviceListView"},s.a.createElement("p",null,s.a.createElement("label",null,"Dashboard name:\xa0",s.a.createElement("input",{type:"text",value:this.props.name,name:"name",placeholder:"Name",onChange:this.handleNameChange}))),s.a.createElement("span",null,"Tick the devices to show in this dashboard"),s.a.createElement(b,{needConfirm:this.props.idxWhitelist&&this.props.idxWhitelist.length>0,onWhitelistChange:this.props.onWhitelistChange}),s.a.createElement("section",{className:"searchbar"},s.a.createElement("div",null,s.a.createElement("input",{type:"text",value:this.state.filter,name:"filter",placeholder:"Search devices",onChange:this.handleFilterChange}),s.a.createElement("button",{onClick:this.clearFilter},"Clear")),s.a.createElement("div",null,s.a.createElement("input",{type:"checkbox",name:"unused",id:"unused",onChange:this.handleUnusedFilterChange,checked:this.state.showUnused}),s.a.createElement("label",{htmlFor:"unused"},"Show unused"))),e)}}]),t}(a.Component)),O=n(56),k=n.n(O),C=(n(210),function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"sanitize",value:function(e){return{__html:k()(e,{allowedTags:k.a.defaults.allowedTags.concat(["img"])})}}},{key:"render",value:function(){var e=this.props.theme,t=e?{background:this.props.readOnly?e.unlockedBackground:e.background,color:e.text,fill:void 0===this.props.isOn?"":this.props.isOn?e.buttonOn:e.buttonOff}:{},n=this.sanitize(this.props.value1),a=void 0===this.props.value2?null:this.sanitize(this.props.value2);return s.a.createElement("div",{className:"GenericWidget "+this.props.class,style:t},this.props.icon&&this.props.layoutWidth>1&&s.a.createElement("svg",null,s.a.createElement("use",{xlinkHref:"#"+this.props.icon})),this.props.children,s.a.createElement("section",null,s.a.createElement("div",null,this.props.label),s.a.createElement("h2",{className:this.props.value1Class?this.props.value1Class:"value1",dangerouslySetInnerHTML:n}),a&&s.a.createElement("div",{className:this.props.value2Class?this.props.value2Class:"value2",dangerouslySetInnerHTML:a})))}}]),t}(a.Component)),E=(n(211),function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return s.a.createElement(C,Object.assign({class:"AlertWidget level"+this.props.level,icon:"warning",value1:this.props.value},this.props))}}]),t}(a.Component)),w=function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return s.a.createElement(C,Object.assign({icon:0===this.props.value?"closed":"open",isOn:Number(this.props.value)>0,value1:0===this.props.value?"Closed":"Open"},this.props))}}]),t}(a.Component),j=(n(212),n(32),function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={failed:!1,timeout:null},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){var e=this;this.setState({timeout:window.setTimeout(function(){return e.setState({failed:!0})},5e3)})}},{key:"componentWillUnmount",value:function(){window.clearTimeout(this.state.timeout)}},{key:"render",value:function(){var e=this.props.theme,t=e?{background:this.props.readOnly?e.unlockedBackground:e.background,color:e.text}:{};return s.a.createElement("div",{className:"LoadingWidget",style:t},this.state.failed?"Offline ?":"Loading...",this.state.failed&&s.a.createElement("button",{onClick:this.props.onRemove},"Remove"))}}]),t}(a.Component)),S=function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return this.props.deviceSpec?s.a.createElement(C,Object.assign({icon:"information-variant",isOn:Number(this.props.value)>0,value1:[this.props.value," ",this.props.deviceSpec.SensorUnit]},this.props)):s.a.createElement(j,null)}}]),t}(a.Component),x=(n(213),function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return s.a.createElement(C,Object.assign({class:"GasWidget",icon:"whatshot",isOn:Number(this.props.usage)>0,value1:Number(this.props.usage).toFixed(0)/1e3},this.props))}}]),t}(a.Component)),N=(n(214),function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return s.a.createElement(C,Object.assign({class:"LuxWidget",icon:"brightness-4",isOn:this.props.lux>0,value1:this.props.lux},this.props))}}]),t}(a.Component)),T=n(108),A=n.n(T),I=null,D=function(){function e(){return Object(r.a)(this,e),I||(this.client=null,this.isConnected=!1,this.eventHandler=function(e,t){},I=this)}return Object(l.a)(e,[{key:"setEventHandler",value:function(e){this.eventHandler=e}},{key:"connect",value:function(e,t,n){var a=this;if(this.client&&this.close(),e){try{this.mqttConfig={},t&&n&&(this.mqttConfig={username:t,password:n}),this.client=A.a.connect(e,this.mqttConfig)}catch(s){return alert("Connection to MQTT broker failed.\n\nPlease make sure the URL is correct and that it accepts WebSocket protocol."),void console.log("connection failed",s)}this.client.on("connect",function(){a.client.subscribe("domoticz/out"),a.setConnected_(!0)}),this.client.on("message",function(e,t){var n=JSON.parse(t.toString());a.eventHandler("message",n)}),this.client.on("error",function(e){console.log("mqtt client error:",e),a.eventHandler("error",e)}),this.client.on("close",function(){a.setConnected_(!1)})}}},{key:"close",value:function(){this.client.end(!0),this.client=null,this.setConnected_(!1)}},{key:"publish",value:function(e){this.isConnected?this.client.publish("domoticz/in",JSON.stringify(e),{qos:2}):console.log("Cannot publish message, client is not connected",e)}},{key:"setConnected_",value:function(e){this.isConnected=e,this.eventHandler("connected",this.isConnected)}}]),e}(),U=(n(26),n(238),function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleClick=function(e){if(!n.props.readOnly){var t={command:"switchlight",idx:n.props.idx,switchcmd:0===n.props.value?"On":"Off",level:100};n.mqtt.publish(t)}},n.mqtt=new D,n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"getButtonStyle",value:function(){var e=this.props.theme;if(!e)return{};var t={color:e.textOn,background:this.props.readOnly?e.unlockedBackground:e.buttonOn};return"Off"!==this.props.valueText&&0!==this.props.value||(t.color=e.textOff,t.background=this.props.readOnly?e.unlockedBackground:e.buttonOff),t}},{key:"render",value:function(){var e=this.props.valueText||(0===this.props.value?"Off":"On"),t="100"===this.props.playing&&"On"===e?"Loading...":"100"===this.props.playing&&"Off"===e?"Off":this.props.playing;return s.a.createElement("button",{className:"switch",style:this.getButtonStyle(),onClick:this.handleClick,title:e},this.props.label,s.a.createElement("i",{className:"playing"},t))}}]),t}(a.Component)),B=function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return s.a.createElement(C,Object.assign({class:"MeterWidget",icon:"equalizer",isOn:Number(this.props.value)>0,value1:this.props.value+(this.props.unit?" "+this.props.unit:"")},this.props))}}]),t}(a.Component),L=function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return s.a.createElement(C,Object.assign({icon:"run-fast",isOn:this.props.value>0,value1:0===this.props.value?"No motion":"Motion"},this.props))}}]),t}(a.Component),z=(n(239),function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).radius=70,n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=Math.PI*this.radius*2,t=(100-Number(this.props.value))/100*Math.PI*(2*this.radius),n=this.props.theme,a=n?{stroke:n.buttonOff,strokeDasharray:e}:{},i=n?{stroke:n.buttonOn,strokeDasharray:e,strokeDashoffset:t}:{};return s.a.createElement(C,Object.assign({class:"PercentWidget",value1:Number(this.props.value).toFixed(0)},this.props),this.props.layoutWidth>1&&s.a.createElement("svg",{className:"doughnut",viewBox:"0 0 200 200",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},s.a.createElement("circle",{style:a,r:this.radius,cx:"100",cy:"100"}),s.a.createElement("circle",{className:"bar",style:i,r:this.radius,cx:"100",cy:"100"})))}}]),t}(a.Component)),M=(n(240),function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return s.a.createElement(C,Object.assign({class:"RainWidget",icon:"weather-rainy",isOn:this.props.rain>0,value1:this.props.rain,value2:this.props.rate},this.props))}}]),t}(a.Component)),H=function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return s.a.createElement(C,Object.assign({icon:"led-on",isOn:this.props.value>0,value1:0===this.props.value?"Normal":"Fire detected"},this.props))}}]),t}(a.Component),W=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).getPushCommand=function(){return n.props.pushOn?"On":n.props.pushOff?"Off":"Toggle"},n.handleClick=function(e){if(!n.props.readOnly){var t={command:n.props.sceneType?"switchscene":"switchlight",idx:parseInt(n.props.idx,10),switchcmd:n.getPushCommand()};n.mqtt.publish(t)}},n.mqtt=new D,n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"getButtonStyle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.props.theme;if(!t)return{};var n={color:e?t.textOff:t.textOn,fill:e?t.textOff:t.textOn,background:this.props.readOnly?t.unlockedBackground:e?t.buttonOff:t.buttonOn},a="repeating-linear-gradient(-45deg, _corner, _corner 20%, _bg 20%, _bg 80%, _corner 80%, _corner 100%)";return this.props.pushOn&&this.props.sceneType?(n.color=t.textMixed,n.background=this.props.readOnly?t.unlockedBackground:a.replace(/_corner/g,t.buttonMixed).replace(/_bg/g,t.buttonOff),n):("Mixed"===this.props.valueText&&(n.color=t.textMixed,n.background=this.props.readOnly?t.unlockedBackground:a.replace(/_corner/g,t.buttonOn).replace(/_bg/g,t.buttonOff)),"Off"!==this.props.valueText&&0!==this.props.value||(n.color=e?t.textOn:t.textOff,n.fill=e?t.textOn:t.textOff,n.background=this.props.readOnly?t.unlockedBackground:e?t.buttonOn:t.buttonOff),n)}},{key:"render",value:function(){var e=this.props.valueText||(0===this.props.value?"Off":"On");return s.a.createElement("button",{className:"switch",style:this.getButtonStyle(),onClick:this.handleClick,title:e},this.props.label)}}]),t}(a.Component),R=(n(241),function(e){function t(e){var n;switch(Object(r.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).open=function(){n.sendValue("Off")},n.stop=function(){n.sendValue("Stop",!0)},n.close=function(){n.sendValue("On")},n.mqtt=new D,n.json=new v.a,n.valueOpen=1,n.valueClosed=3,n.valueStopped=0,n.inverted=!1,n.props.type){case"Blinds":switch(n.props.device.stype){case"ASP":n.valueOpen=0,n.valueClosed=1,n.valueStopped=2}break;case"Blinds Inverted":n.inverted=!0,n.valueOpen=3,n.valueClosed=1;break;case"Venetian Blinds EU":n.valueOpen=17,n.valueClosed=18;break;case"Venetian Blinds US":n.valueOpen=15,n.valueClosed=16}return n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"sendValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.props.readOnly){var n={command:"switchlight",idx:this.props.idx,switchcmd:e};t?(n.type="command",n.param="switchlight",this.json.get(n)):this.mqtt.publish(n)}}},{key:"render",value:function(){var e=this.props.value===this.valueOpen,t=this.props.value===this.valueClosed,n=this.props.theme,a=n?{background:this.props.readOnly?n.unlockedBackground:n.background,color:n.text}:{},i=n?{fill:e?n.textOn:n.textOff,background:e?n.buttonOn:n.buttonOff}:{},o=n?{fill:this.props.value===this.valueStopped?n.textOn:n.textOff,background:this.props.value===this.valueStopped?n.buttonOn:n.buttonOff}:{},r=n?{fill:t?n.textOn:n.textOff,background:t?n.buttonOn:n.buttonOff}:{};return s.a.createElement("div",{className:"SwitchBlinds",style:a},s.a.createElement("h2",null,this.props.label),s.a.createElement("section",null,s.a.createElement("button",{onClick:this.inverted?this.close:this.open,className:"blindsOpen"+(e?" selected":""),style:i},s.a.createElement("svg",{className:"icon"},s.a.createElement("use",{xlinkHref:"#arrow-up-drop-circle"}))),s.a.createElement("button",{onClick:this.stop,className:"blindsStop"+(this.props.value===this.valueStopped?" selected":""),style:o},s.a.createElement("svg",{className:"icon"},s.a.createElement("use",{xlinkHref:"#stop-circle"}))),s.a.createElement("button",{onClick:this.inverted?this.open:this.close,className:"blindsClose"+(t?" selected":""),style:r},s.a.createElement("svg",{className:"icon"},s.a.createElement("use",{xlinkHref:"#arrow-down-drop-circle"})))))}}]),t}(a.Component)),F=n(36),V=(n(243),function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleValueChange=function(e){0===e?n.sendOff():n.sendValue(e)},n.sendValue=function(e){var t=n.props.deviceSpec.MaxDimLevel||100,a={command:"switchlight",idx:n.props.idx,switchcmd:"Set Level",level:Math.round(e*t)};n.mqtt.publish(a)},n.sendOff=function(){var e={command:"switchlight",idx:n.props.idx,switchcmd:"Off"};n.mqtt.publish(e)},n.toggle=function(){if(!n.props.readOnly){var e={command:"switchlight",switchcmd:"Toggle",idx:n.props.idx};n.mqtt.publish(e)}},n.mqtt=new D,n.state={localValue:n.props.value,debounceTimeoutId:null,fadeTimeoutId:null,showBar:!1},n.touchTarget=null,n.touchStartData=null,n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){if(!this.props.deviceSpec)return s.a.createElement(j,null);var e=this.props.theme,t={background:this.props.readOnly?e.unlockedBackground:e.background},n=e?{background:0===this.props.value?e.buttonOff:e.buttonOn,color:0===this.props.value?e.textOff:e.textOn}:{},a=e?{background:e.buttonOn,color:e.textOn}:{},i=e?{background:e.buttonOff,color:e.textOff}:{},o=this.props.deviceSpec.MaxDimLevel||100,r=this.props.value/o*100;a.transform="translateX("+(100-r)+"%)";var l=0===this.props.device.nvalue?"Off":"On";return s.a.createElement("div",{className:"SwitchDimmer",style:t},s.a.createElement("button",{className:"toggle",style:n,title:this.props.layoutWidth>1?l:this.props.label,onClick:this.toggle},this.props.layoutWidth>1?"":this.props.label),this.props.layoutWidth>1&&s.a.createElement("div",{className:"dimmerSlider"},s.a.createElement("div",{className:"dimmerContainer",style:i},s.a.createElement("div",{className:"dimmerProgress",style:{transform:"translateX("+r+"%)"}},s.a.createElement("div",{className:"dimmerProgressContent",style:a},s.a.createElement("p",null,this.props.label))),s.a.createElement("p",null,this.props.label)),s.a.createElement(F.a,{disabled:this.props.readOnly,throttle:200,onChange:this.handleValueChange,value:this.props.value/o})))}}]),t}(a.Component)),q=(n(244),function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=0===this.props.value?"Unlocked":"Locked",t=0===this.props.value?"exit-to-app":"lock-outline";return s.a.createElement("button",{className:"switch SwitchLock",style:this.getButtonStyle(!0),onClick:this.handleClick,title:e},this.props.layoutWidth>1&&s.a.createElement("svg",{className:"lockicon"},s.a.createElement("use",{xlinkHref:"#"+t})),s.a.createElement("div",null,this.props.label))}}]),t}(W)),P=(n(245),function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).toggle=function(){if(!n.props.readOnly){var e={type:"command",param:"switchlight",switchcmd:"Toggle",idx:n.props.idx};n.json.get(e)}},n.changeHue=function(e){n.setState({hue:e,sat:1})},n.changeColor=function(e){if(!n.props.readOnly){n.setState({color:e});var t={type:"command",param:"setcolbrightnessvalue",idx:n.props.idx,hex:e.replace("#",""),brightness:100,iswhite:!1};n.json.get(t)}},n.toWhite=function(){n.props.readOnly||(n.setState({sat:0}),n.changeColor("#ffffff"))},n.state={color:"",hue:0,sat:0},n.json=new v.a,n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"toHexStr",value:function(e){var t=Math.round(255*e).toString(16);return t.length<2?"0"+t:t}},{key:"hslToHex",value:function(){var e,t,n,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5;if(0===s)e=t=n=i;else{var o=function(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e},r=i<.5?i*(1+s):i+s-i*s,l=2*i-r;e=o(l,r,a+1/3),t=o(l,r,a),n=o(l,r,a-1/3)}return"#"+this.toHexStr(e)+this.toHexStr(t)+this.toHexStr(n)}},{key:"render",value:function(){var e=this,t=this.props.theme,n={background:this.props.readOnly?t.unlockedBackground:t.background},a=t?{background:0===this.props.value?t.buttonOff:t.buttonOn,color:0===this.props.value?t.textOff:t.textOn}:{},i=0===this.props.value?"Off":"On",o=this.hslToHex(this.state.hue,this.state.sat,this.state.sat?.125:.2),r=this.hslToHex(this.state.hue,this.state.sat,this.state.sat?.25:.4),l=this.hslToHex(this.state.hue,this.state.sat,this.state.sat?.375:.6),c=this.hslToHex(this.state.hue,this.state.sat,this.state.sat?.5:.8);return s.a.createElement("div",{className:"SwitchRGBW",style:n},s.a.createElement("button",{className:"toggle",style:a,title:i,onClick:this.toggle},this.props.label),this.props.layoutWidth>1&&s.a.createElement("div",{className:"colorSelect"},s.a.createElement("div",{className:"swatch"},s.a.createElement("button",{title:"Color at 25%",style:{background:o},onClick:function(){return e.changeColor(o)}}),s.a.createElement("button",{title:"Color at 50%",style:{background:r},onClick:function(){return e.changeColor(r)}}),s.a.createElement("button",{title:"Color at 75%",style:{background:l},onClick:function(){return e.changeColor(l)}}),s.a.createElement("button",{title:"Color at 100%",style:{background:c},onClick:function(){return e.changeColor(c)}}),s.a.createElement("div",{style:{background:t.buttonOn}},s.a.createElement("button",{className:"white",style:{borderColor:t.buttonOn},title:"Return to white",onClick:this.toWhite}))),s.a.createElement("div",{className:"hue"},s.a.createElement(F.a,{disabled:this.props.readOnly,edgeTolerance:.1,onChange:this.changeHue,value:this.state.hue}))))}}]),t}(a.Component)),G=(n(246),function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleSelect=function(e){if(!n.props.readOnly){var t={command:"switchlight",idx:n.props.idx,switchcmd:"Set Level",level:e.target.value};n.mqtt.publish(t)}},n.mqtt=new D,n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){if(!this.props.deviceSpec)return s.a.createElement(j,null);var e=this.props.theme,t=e?{background:this.props.readOnly?e.unlockedBackground:e.background,color:e.text}:{},n=e?{background:e.buttonOff,color:e.textOff}:{},a=e?{background:e.buttonOn,color:e.textOn}:{},i=e?{color:"0"===this.props.value?e.textOff:e.textOn}:{},o=this.props.levels.map(function(e,t){var i=10*t,o=parseInt(this.props.value,10)===i;return 0===t&&!0===this.props.deviceSpec.LevelOffHidden?null:this.props.useButtons?s.a.createElement("button",{key:t+"-"+e,className:"switch",style:o?a:n,value:i,onClick:this.handleSelect},e):s.a.createElement("option",{key:t+"-"+e,value:i},e)},this);return this.props.useButtons?s.a.createElement("div",{className:"selector",style:t},s.a.createElement("h2",null,this.props.label),s.a.createElement("section",null,o)):s.a.createElement("div",{className:"selector",style:t},s.a.createElement("h2",null,this.props.label),s.a.createElement("div",{className:"selectContainer"},s.a.createElement("i",{className:"carret",style:i},"\u25bc"),s.a.createElement("select",{disabled:this.props.readOnly,value:this.props.value,style:"0"===this.props.value?n:a,onChange:this.handleSelect},o)))}}]),t}(a.Component)),Z=(n(247),function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){if(void 0!==this.props.humonly){var e=0===this.props.humstat?"Normal":1===this.props.humstat?"Comfortable":2===this.props.humstat?"Dry":"Wet";return s.a.createElement(C,Object.assign({class:"TemperatureWidget",icon:"water-percent",isOn:this.props.humstat>2,value1:this.props.humonly,value1Class:"humonly",value2:e},this.props))}return s.a.createElement(C,Object.assign({class:"TemperatureWidget",icon:"thermometer-lines",isOn:this.props.temp>19.9,value1:this.props.temp,value1Class:"temp",value2:this.props.hum,value2Class:"hum"},this.props))}}]),t}(a.Component)),_=function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=[],t=this.props.device;for(var n in t)({}).hasOwnProperty.call(t,n)&&n.match(/^svalue/)&&e.push(t[n]);var a=e.join(" ").replace(/&nbsp/g," ");return s.a.createElement(C,Object.assign({value1:a},this.props))}}]),t}(a.Component),J=(n(248),function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).decreaseSetpoint=function(){n.updateSetpoint(-.5)},n.increaseSetpoint=function(){n.updateSetpoint(.5)},n.json=new v.a,n.state={settingValue:!1,targetValue:parseFloat(n.props.value,10),throttleId:null},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"updateSetpoint",value:function(e){var t=this;if(!this.props.readOnly){window.clearTimeout(this.state.throttleId);var n=this.state.settingValue?this.state.targetValue:parseFloat(this.props.value);n+=e,this.setState({settingValue:!0,targetValue:n,throttleId:window.setTimeout(function(){return t.emitSetpointUpdate()},1e3)})}}},{key:"emitSetpointUpdate",value:function(){var e=this,t={type:"command",param:"udevice",idx:this.props.idx,nvalue:0,svalue:this.state.targetValue};this.json.get(t,function(){e.setState({settingValue:!1})})}},{key:"render",value:function(){var e=!!this.state.settingValue&&this.state.targetValue!==parseFloat(this.props.value,10),t=e?Number(this.state.targetValue).toFixed(1):parseFloat(this.props.value,10),n=this.props.theme,a=n?{background:this.props.readOnly?n.unlockedBackground:n.background,color:n.text}:{},i=n?{background:n.buttonOff,color:n.textOff}:{};return s.a.createElement("div",{className:"ThermostatWidget",style:a},s.a.createElement("h2",null,this.props.label),s.a.createElement("div",{className:"controls"},s.a.createElement("button",{className:"switch minus",style:i,onClick:this.decreaseSetpoint},"-"),s.a.createElement("div",{className:e?"blink":""},t),s.a.createElement("button",{className:"switch plus",style:i,onClick:this.increaseSetpoint},"+")))}}]),t}(a.Component)),Y=(n(249),function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=void 0!==this.props.prodValue;return s.a.createElement(C,Object.assign({class:"WattWidget"+(e?" withProd":""),icon:"power",isOn:Number(this.props.powerValue)>0,value1:Number(this.props.powerValue).toFixed(1),value2:e?Number(this.props.prodValue).toFixed(1):Number(this.props.energyValue/1e3).toFixed(3)},this.props))}}]),t}(a.Component)),Q=(n(250),function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return void 0!==this.props.visibility?s.a.createElement(C,Object.assign({class:"WeatherInfoWidget",icon:"eye",isOn:this.props.visibility>0,value1:this.props.visibility,value1Class:"visibility"},this.props)):void 0!==this.props.radiation?s.a.createElement(C,Object.assign({class:"WeatherInfoWidget",icon:"weather-sunny",isOn:this.props.radiation>0,value1:this.props.radiation,value1Class:"radiation"},this.props)):s.a.createElement(C,Object.assign({class:"WeatherInfoWidget",icon:"sunglasses",isOn:this.props.uv>0,value1:this.props.uv,value1Class:"uv"},this.props))}}]),t}(a.Component)),X=(n(251),function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"getProperties",value:function(){var e=this.props.device,t=Number(e.svalue1).toFixed(1);switch(e.dtype){case"Temp + Humidity + Baro":return{temp:t,hum:e.svalue2,baro:this.props.hidePressure?void 0:e.svalue4,forecast:e.svalue5}}}},{key:"render",value:function(){var e=this.getProperties(),t=this.props.theme,n=t?{background:this.props.readOnly?t.unlockedBackground:t.background,color:t.text}:{};return s.a.createElement("div",{className:"WeatherWidget",style:n},void 0!==e.forecast&&this.props.layoutWidth>1&&s.a.createElement("div",{className:"weatherImage weather"+e.forecast}),s.a.createElement("div",{className:"weatherData"},s.a.createElement("div",{className:"name"},this.props.device.name),void 0!==e.temp&&s.a.createElement("div",{className:"temp"},e.temp),void 0!==e.baro&&s.a.createElement("div",{className:"baro"},e.baro),void 0!==e.hum&&s.a.createElement("div",{className:"hum"},e.hum)))}}]),t}(a.Component)),K=(n(252),function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return s.a.createElement(C,Object.assign({class:"WindWidget",isOn:this.props.speed>0,value1:this.props.direction,value2:Number(this.props.speed/10*3.6).toFixed(1)},this.props),this.props.layoutWidth>1&&s.a.createElement("svg",{style:{transform:"rotateZ("+this.props.bearing+"deg)"}},s.a.createElement("use",{xlinkHref:"#navigation"})))}}]),t}(a.Component)),$=(n(253),function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){if(!this.props.deviceSpec){switch(this.props.device.switchType){case"Selector":this.props.requestDeviceSpec();break;case"Dimmer":"RGBW"!==this.props.device.stype&&this.props.requestDeviceSpec()}switch(this.props.device.stype){case"Custom Sensor":this.props.requestDeviceSpec()}}}},{key:"render",value:function(){var e=this.props.device;switch(e.switchType){case"Blinds":case"Blinds Inverted":case"Venetian Blinds EU":case"Venetian Blinds US":return s.a.createElement(R,Object.assign({idx:e.idx,label:e.name,value:e.nvalue,type:e.switchType},this.props));case"Contact":case"Door Contact":return s.a.createElement(w,Object.assign({label:e.name,value:e.nvalue},this.props));case"Door Lock":return s.a.createElement(q,Object.assign({idx:e.idx,label:e.name,value:e.nvalue},this.props));case"Dimmer":return"RGBW"===e.stype?s.a.createElement(P,Object.assign({idx:e.idx,label:e.name,value:e.nvalue},this.props)):s.a.createElement(V,Object.assign({idx:e.idx,label:e.name,device:e,value:0===e.nvalue?0:e.svalue1},this.props));case"Media Player":return s.a.createElement(U,Object.assign({idx:e.idx,label:e.name,value:e.nvalue,playing:e.svalue1},this.props));case"Motion Sensor":return s.a.createElement(L,Object.assign({label:e.name,value:Number(e.nvalue)},this.props));case"On/Off":return"KD101 smoke detector"===e.stype||"string"===typeof e.description&&e.description.includes("Reacticz: smoke sensor")?s.a.createElement(H,Object.assign({idx:e.idx,label:e.name,value:e.nvalue},this.props)):s.a.createElement(W,Object.assign({idx:e.idx,label:e.name,value:e.nvalue},this.props));case"Push Off Button":return s.a.createElement(W,Object.assign({idx:e.idx,label:e.name,pushOff:!0,value:e.nvalue},this.props));case"Push On Button":return s.a.createElement(W,Object.assign({idx:e.idx,label:e.name,pushOn:!0,value:e.nvalue},this.props));case"Selector":return s.a.createElement(G,Object.assign({idx:e.idx,label:e.name,value:e.svalue1,levels:e.LevelNames.split("|"),useButtons:"0"===e.SelectorStyle},this.props))}switch(e.dtype){case"General":switch(e.stype){case"Alert":return s.a.createElement(E,Object.assign({label:e.name,value:e.svalue1,level:e.nvalue},this.props));case"Custom Sensor":return s.a.createElement(S,Object.assign({label:e.name,value:e.svalue1},this.props));case"kWh":return s.a.createElement(Y,Object.assign({label:e.name,powerValue:e.svalue1,energyValue:e.svalue2},this.props));case"Percentage":return s.a.createElement(z,Object.assign({label:e.name,value:e.svalue1},this.props));case"Solar Radiation":return s.a.createElement(Q,Object.assign({label:e.name,radiation:Number(e.svalue1)},this.props));case"Text":return s.a.createElement(_,Object.assign({label:e.name,value:e.svalue1},this.props));case"Visibility":return s.a.createElement(Q,Object.assign({label:e.name,visibility:Number(e.svalue1)},this.props))}break;case"Heating":case"Thermostat":return s.a.createElement(J,Object.assign({idx:e.idx,label:e.name,value:e.svalue1},this.props));case"P1 Smart Meter":switch(e.stype){case"Energy":return s.a.createElement(Y,Object.assign({label:e.name,powerValue:e.svalue5,prodValue:e.svalue6},this.props));case"Gas":return s.a.createElement(x,Object.assign({label:e.name,usage:e.svalue1},this.props))}break;case"Humidity":return s.a.createElement(Z,Object.assign({label:e.name,humonly:Number(e.nvalue),humstat:Number(e.svalue1)},this.props));case"Lux":return s.a.createElement(N,Object.assign({label:e.name,lux:Number(e.svalue1)},this.props));case"Rain":return s.a.createElement(M,Object.assign({label:e.name,rain:Number(e.svalue2).toFixed(1),rate:Number(e.svalue1/100).toFixed(1)},this.props));case"RFXMeter":var t,n=Number(e.svalue1);switch(e.meterType){case"Gas":return s.a.createElement(x,Object.assign({label:e.name,usage:e.svalue1},this.props));case"Counter":t=e.ValueUnits;break;case"Energy":case"Energy Generated":n/=1e3,t="kWh";break;case"Water":n/=1e3,t="m3"}return s.a.createElement(B,Object.assign({label:e.name,value:n,unit:t},this.props));case"Temp":return s.a.createElement(Z,Object.assign({label:e.name,temp:Number(e.svalue1).toFixed(1)},this.props));case"Temp + Humidity":return s.a.createElement(Z,Object.assign({label:e.name,temp:Number(e.svalue1).toFixed(1),hum:Number(e.svalue2)},this.props));case"Temp + Humidity + Baro":return s.a.createElement(X,Object.assign({hidePressure:"true"},this.props));case"Usage":switch(e.stype){case"Electric":return s.a.createElement(Y,Object.assign({label:e.name,powerValue:e.svalue1},this.props))}break;case"UV":return s.a.createElement(Q,Object.assign({label:e.name,uv:Number(e.svalue1)},this.props));case"Wind":return s.a.createElement(K,Object.assign({idx:e.idx,label:e.name,bearing:Number(e.svalue1),direction:e.svalue2,speed:Number(e.svalue3)},this.props))}return s.a.createElement("div",{className:"Unsupported"},s.a.createElement("h2",null,"Unsupported type: ",e.switchType||e.stype),s.a.createElement("textarea",{defaultValue:JSON.stringify(e)}))}}]),t}(a.Component)),ee=n(33),te=n.n(ee),ne=function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.scene;switch(e.Type){case"Group":case"Scene":return s.a.createElement(W,Object.assign({sceneType:e.Type,idx:e.idx,label:e.Name,valueText:e.Status,pushOn:"Scene"===e.Type},this.props))}return s.a.createElement("div",null,s.a.createElement("h3",null,"Unsupported type: ",e.Type),s.a.createElement("pre",null,JSON.stringify(e)))}}]),t}(a.Component),ae=n(19),se=(n(254),n(34)),ie=n.n(se),oe=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){var t=e.target,a={};a[t.name]="checkbox"===t.type?t.checked:t.value,n.setState(a)},n.handleSubmit=function(e){e.preventDefault();var t=Object.assign({},n.state);t.mqttAuthChecked||(t.mqttLogin="",t.mqttPassword=""),t.domoticzAuthChecked||(t.domoticzLogin="",t.domoticzPassword=""),n.setState(t),n.props.onChange(t)},n.renderWelcomeMsg=function(){return s.a.createElement("div",null,s.a.createElement("h1",null,"Reacticz"),s.a.createElement("img",{src:ie.a,alt:"Reacticz logo"}),s.a.createElement("p",null,"Welcome to Reacticz, the minimalistic ",s.a.createElement("a",{href:"http://www.domoticz.com",target:"_blank",rel:"noopener noreferrer"},"Domoticz")," dashboard!",s.a.createElement("br",null),"Documentation is available on  ",s.a.createElement("a",{href:"https://github.com/domoticz/Reacticz#reacticz",target:"_blank",rel:"noopener noreferrer"},"GitHub"),"."),s.a.createElement("p",null,"Please setup your server config to proceed."),s.a.createElement("p",null,s.a.createElement("em",null,"Not your first time here?\xa0\xa0",s.a.createElement("button",{onClick:n.props.importConfigPrompt},"Import config from another dashboard"))))},n.renderMqttAuthForm=function(){return s.a.createElement("fieldset",null,s.a.createElement("label",null,"Username\xa0",s.a.createElement("input",{type:"text",value:n.state.mqttLogin,name:"mqttLogin",placeholder:"Username",onChange:n.handleChange})),s.a.createElement("label",null,"Password\xa0",s.a.createElement("input",{type:"password",value:n.state.mqttPassword,name:"mqttPassword",placeholder:"Password",onChange:n.handleChange})))},n.renderDomoticzAuthForm=function(){return s.a.createElement("fieldset",null,s.a.createElement("label",null,"Username\xa0",s.a.createElement("input",{type:"text",value:n.state.domoticzLogin,name:"domoticzLogin",placeholder:"Username",onChange:n.handleChange})),s.a.createElement("label",null,"Password\xa0",s.a.createElement("input",{type:"password",value:n.state.domoticzPassword,name:"domoticzPassword",placeholder:"Password",onChange:n.handleChange})))},n.state={domoticzAuthChecked:!!e.config&&!!e.config.domoticzAuthChecked,domoticzLogin:e.config?e.config.domoticzLogin:"",domoticzPassword:e.config?e.config.domoticzPassword:"",domoticzUrl:e.config?e.config.domoticzUrl:"",mqttAuthChecked:!!e.config&&!!e.config.mqttAuthChecked,mqttBrokerUrl:e.config?e.config.mqttBrokerUrl:"",mqttLogin:e.config?e.config.mqttLogin:"",mqttPassword:e.config?e.config.mqttPassword:""},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.serverStatus&&this.props.serverStatus.mqtt?s.a.createElement("span",{className:"Status OK"},"connected!"):s.a.createElement("span",{className:"Status"},"unavailable"),t=this.props.serverStatus&&this.props.serverStatus.domoticz?s.a.createElement("span",{className:"Status OK"},"connected!"):s.a.createElement("span",{className:"Status"},"unavailable");return s.a.createElement("div",{className:"SettingsView"},!(this.props.config&&this.props.config.mqttBrokerUrl&&this.props.config.domoticzUrl)&&this.renderWelcomeMsg(),s.a.createElement("h2",null,"Server Settings"),s.a.createElement("p",null,"To use Reacticz you need a working Domoticz server and a configured MQTT broker with websockets enabled (see ",s.a.createElement("a",{href:"https://github.com/domoticz/Reacticz#requirements",target:"_blank",rel:"noopener noreferrer"},"requirements"),")."),s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement("h3",null,"MQTT ",this.props.config&&this.props.config.mqttBrokerUrl&&e),s.a.createElement("label",null,"Broker URL:",s.a.createElement("input",{type:"url",value:this.state.mqttBrokerUrl,name:"mqttBrokerUrl",placeholder:"ws://mqtt-broker:port",onChange:this.handleChange})),s.a.createElement("label",null,s.a.createElement("input",{type:"checkbox",name:"mqttAuthChecked",onChange:this.handleChange,checked:this.state.mqttAuthChecked})," use authentication"),s.a.createElement("br",null),this.state.mqttAuthChecked&&this.renderMqttAuthForm(),s.a.createElement("br",null),s.a.createElement("h3",null,"Domoticz ",this.props.config&&this.props.config.domoticzUrl&&t),s.a.createElement("label",null,"Server URL:",s.a.createElement("input",{type:"url",value:this.state.domoticzUrl,name:"domoticzUrl",placeholder:"http://domoticz-server:port",onChange:this.handleChange})),s.a.createElement("label",null,s.a.createElement("input",{type:"checkbox",name:"domoticzAuthChecked",onChange:this.handleChange,checked:this.state.domoticzAuthChecked})," use authentication"),s.a.createElement("br",null),this.state.domoticzAuthChecked&&this.renderDomoticzAuthForm(),s.a.createElement("br",null),s.a.createElement("input",{type:"submit",value:"Apply & Save"})))}}]),t}(a.Component),re={Default:{appBackground:"white",appText:"#3a3a3a",background:"white",buttonMixed:"#4a4a4a",buttonOff:"#8a8a8a",buttonOn:"#ffbc00",menuIcon:"#666",menuIconSelected:"#ffbc00",overlayBackground:"rgba(255, 255, 255, .85)",overlayText:"#666",text:"#666",textMixed:"white",textOff:"white",textOn:"#3E2723",unlockedBackground:"#eeeeee"},Lighter:{appBackground:"white",appText:"#3a3a3a",background:"white",buttonMixed:"#808080",buttonOff:"#eee",buttonOn:"#ffbc00",menuIcon:"#666",menuIconSelected:"#ffbc00",overlayBackground:"rgba(255, 255, 255, .85)",overlayText:"#666",text:"#808080",textMixed:"#808080",textOff:"#808080",textOn:"white",unlockedBackground:"#eeeeee"},"Light Blue":{appBackground:"white",appText:"black",background:"#99CCFF",buttonMixed:"#4a4a4a",buttonOff:"#8a8a8a",buttonOn:"#3366FF",menuIcon:"#666",menuIconSelected:"#3366FF",overlayBackground:"rgba(255, 255, 255, .85)",overlayText:"#666",text:"black",textMixed:"white",textOff:"white",textOn:"white",unlockedBackground:"#eeeeee"},"Light Green":{appBackground:"white",appText:"black",background:"#66FF99",buttonMixed:"#4a4a4a",buttonOff:"#8a8a8a",buttonOn:"#009900",menuIcon:"#666",menuIconSelected:"#009900",overlayBackground:"rgba(255, 255, 255, .85)",overlayText:"#666",text:"black",textMixed:"white",textOff:"white",textOn:"white",unlockedBackground:"#eeeeee"},"Dark Grey":{appBackground:"#303030",appText:"#F5F5F5",background:"#424242",buttonMixed:"#607D8B",buttonOff:"#616161",buttonOn:"#607D8B",menuIcon:"#607D8B",menuIconSelected:"#F5F5F5",overlayBackground:"rgba(66, 66, 66, 0.85)",overlayText:"#90A4AE",text:"#F5F5F5",textMixed:"#F5F5F5",textOff:"#F5F5F5",textOn:"#F5F5F5",unlockedBackground:"repeating-linear-gradient(45deg, #607D8B, #607D8B 5px, #90A4AE 10px, #90A4AE 20px)"},Dark:{appBackground:"#636363",appText:"#dadada",background:"rgba(37, 37, 37, .1)",buttonMixed:"rgba(37, 37, 37, .9)",buttonOff:"rgba(37, 37, 37, .4)",buttonOn:"rgba(37, 37, 37, .9)",menuIcon:"rgba(33, 33, 33, .9)",menuIconSelected:"#dadada",overlayBackground:"rgba(68, 68, 68, .8)",overlayText:"#dadada",text:"#dadada",textMixed:"#dadada",textOff:"#dadada",textOn:"#dadada",unlockedBackground:"rgba(51, 51, 51, .9)"}},le=(n(255),n(256),Object(d.WidthProvider)(d.Responsive)),ce=3600,ue=-1,he={DASHBOARD:1,DEVICE_LIST:2,SERVER_SETTINGS:3,ABOUT:4},pe=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).handlePopstate=function(e){e.state&&void 0!==e.state.id&&n.loadConfig(e.state.id,!0)},n.mqttEventHandler=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;switch(e){case"connected":if(n.setState({serverStatus:Object.assign(n.state.serverStatus,{mqtt:!!t})}),!0===t)for(var a=0;a<n.state.whitelist.length;a++)n.requestDeviceStatus(n.state.whitelist[a]);break;case"error":break;case"message":if(n.state.whitelist.indexOf("d|"+t.idx)>=0){var s=Object.assign({},n.state.devices);s["d|"+t.idx]=t,n.setState({devices:s}),n.hasWhitelistedScenes()&&n.requestScenesStatus(!0)}n.render();break;default:console.log("unknown event type from MqttClientSingleton",e)}},n.domoticzEventHandler=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;switch(e){case"connected":n.setState({serverStatus:Object.assign(n.state.serverStatus,{domoticz:!!t})});break;default:console.log("unknown event type from JSONClientSingleton",e)}},n.updateDocumentTitle=function(e){document&&(document.title=e?e+" | Reacticz":"Reacticz")},n.getPrevConfig=function(){n.getNewConfig(!0)},n.getNextConfig=function(){n.getNewConfig()},n.getNewConfig=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=n.configHelper.getNextId(n.state.configId,e);n.loadConfig(t)},n.deleteCurrentConfig=function(){if(window.confirm("Delete this dashboard ?")){n.configHelper.deleteConfig(n.state.configId);var e=n.configHelper.getConfigs().length>=n.state.configId+1?n.state.configId:0;n.loadConfig(e)}},n.readSharedConfigFromUrl=function(e){var t=e||document.location.hash.slice(1);if(t){if(window.confirm("Reacticz configuration parameters detected! Apply here?\n\nNote: if a dashboard configuration is found in the parameters and your already have one setup here, a new separate dashboard will be created."))try{var a=JSON.parse(te.a.decompressFromEncodedURIComponent(t));if(a.s&&n.handleServerConfigChange(a.s),a.t&&n.handleThemeChange(a.t),a.w){if(n.state.whitelist.length>0)return console.log("adding config"),void n.loadConfig(n.configHelper.addConfig({name:a.n||"Imported dashboard",layout:a.l||[],whitelist:a.w||[]}));n.handleConfigNameChange(a.n||"Imported dashboard"),n.handleDeviceListChange(a.w||[]),n.storeConfigChange({layout:a.l||[]}),n.setState({layout:a.l||[]})}}catch(s){console.log(s),alert("Sorry, something went wrong. The configuration could not be read.")}document.location.hash=""}},n.importConfigPrompt=function(){var e=prompt("Please paste the full configuration URL to import.\n\nThis URL can be found in the About page of a configured Reacticz dashboard.");e&&2===e.split("#").length&&n.readSharedConfigFromUrl(e.split("#")[1])},n.handleServerConfigChange=function(e){n.setState({serverConfig:e}),n.store.write("serverConfig",e),n.connectClients(e)},n.handleThemeChange=function(e){var t=re[e];t&&(n.setState({themeId:e,theme:t}),n.store.write("themeId",e))},n.handleZoomChange=function(e){n.setState({zoom:e}),n.store.write("zoom",e)},n.handleScreensaverConfigChange=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.delay=e.delay!==ue?Math.abs(Math.min(e.delay,ce)):e.delay,n.setState({screensaverConfig:e}),n.store.write("screensaverConfig",e)},n.handleConfigNameChange=function(e){n.setState({configName:e}),n.storeConfigChange({name:e})},n.storeConfigChange=function(e){n.configHelper.storeConfigChange(n.state.configId,e)},n.handleDeviceListChange=function(e){for(var t=Object.assign({},n.state.devices),a=0;a<n.state.whitelist.length;a++){var s=n.state.whitelist[a];e.indexOf(s)<0&&delete t[s]}n.setState({whitelist:e,devices:t}),n.storeConfigChange({whitelist:e}),n.cleanupLayout(e);for(var i=0;i<e.length;i++)t[e[i]]||n.requestDeviceStatus(e[i]);n.hasWhitelistedScenes(e)&&n.requestScenesStatus()},n.removeDevice=function(e){if(window.confirm("Remove this widget ?")){var t=n.state.whitelist.slice(0);t.splice(t.indexOf(e),1),n.handleDeviceListChange(t)}},n.requestDeviceStatus=function(e){if("d"===e.split("|")[0]){var t=parseInt(e.split("|")[1],10);n.mqtt.publish({command:"getdeviceinfo",idx:t})}},n.requestDeviceSpec=function(e){var t=e.split("|");"d"===t[0]&&n.json.get({type:"devices",rid:t[1]},function(t){var a=Object.assign({},n.state.deviceSpecs);a[e]=t.result[0],n.setState({deviceSpecs:a})})},n.requestScenesStatus=function(){(arguments.length>0&&void 0!==arguments[0]&&arguments[0]?n.json.getAllScenesThrottled:n.json.getAllScenes)(function(e){if("OK"===e.status){for(var t=e.result,a=Object.assign({},n.state.devices),s=0;s<t.length;s++){var i=t[s],o=("Group"===i.Type?"g":"s")+"|"+i.idx;n.state.whitelist.indexOf(o)>=0&&(a[o]=i)}n.setState({devices:a})}else alert("Unable to get scenes status.")})},n.toggleMenu=function(){n.setState({menuOpen:!n.state.menuOpen})},n.toggleSettings=function(){n.setState({currentView:he.SERVER_SETTINGS,layoutLocked:!0})},n.toggleDeviceList=function(){n.setState({currentView:he.DEVICE_LIST,layoutLocked:!0})},n.toggleAbout=function(){n.setState({currentView:he.ABOUT,layoutLocked:!0})},n.toggleLayoutEdit=function(){n.setState({layoutLocked:!n.state.layoutLocked})},n.toMainView=function(){n.setState({currentView:he.DASHBOARD})},n.onLayoutChange=function(e){n.setState({layout:e}),n.storeConfigChange({layout:e})},n.renderCurrentView=function(){switch((arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)||n.state.currentView){case he.ABOUT:return s.a.createElement(m.a,{appState:n.state,themes:re,zoom:n.state.zoom,screensaverConfig:n.state.screensaverConfig,configName:n.state.configName,onThemeChange:n.handleThemeChange,onZoomChange:n.handleZoomChange,onScreensaverConfigChange:n.handleScreensaverConfigChange,multiConfig:n.state.multiConfig});case he.SERVER_SETTINGS:return s.a.createElement(oe,{config:n.state.serverConfig,serverStatus:n.state.serverStatus,onChange:n.handleServerConfigChange,importConfigPrompt:n.importConfigPrompt});case he.DEVICE_LIST:return s.a.createElement(y,{onWhitelistChange:n.handleDeviceListChange,idxWhitelist:n.state.whitelist,name:n.state.configName,onNameChange:n.handleConfigNameChange});default:if(0===n.state.whitelist.length)return s.a.createElement("div",{className:"addDevices"},!n.state.multiConfig&&s.a.createElement("h2",null,"Welcome to your Reacticz dashboard!"),n.state.multiConfig&&s.a.createElement("h2",null,"This is a new blank dashboard!"),n.state.multiConfig&&s.a.createElement("p",null,"Use the arrows (",s.a.createElement("svg",{className:"icon"},s.a.createElement("use",{xlinkHref:"#navigate-before"}))," and ",s.a.createElement("svg",{className:"icon"},s.a.createElement("use",{xlinkHref:"#navigate-next"})),") at the bottom to switch between your dashboards."),s.a.createElement("p",null,"This dashboard is currently empty. Open the menu at the top right (",s.a.createElement("svg",{className:"icon"},s.a.createElement("use",{xlinkHref:"#settings"})),") and go to the devices list screen (",s.a.createElement("svg",{className:"icon"},s.a.createElement("use",{xlinkHref:"#playlist-add-check"})),") to select the widgets you want to add."),s.a.createElement("p",null,"Then come back here (",s.a.createElement("svg",{className:"icon"},s.a.createElement("use",{xlinkHref:"#home"})),") and unlock the layout (",s.a.createElement("svg",{className:"icon"},s.a.createElement("use",{xlinkHref:"#lock"})),") to drag and resize the widgets however you like."),s.a.createElement("p",null,"That's it!"));var e=n.state.layout.map(function(e){var t=this,n=e.i,a=this.state.devices[n];if(!a)return s.a.createElement("div",{key:n,className:"gridItem"},s.a.createElement(j,{onRemove:function(){return t.removeDevice(n)},theme:this.state.theme}));var i="";return i="Group"===a.Type||"Scene"===a.Type?s.a.createElement(ne,{readOnly:!this.state.layoutLocked,key:"item"+n,scene:a,onChange:this.requestScenesStatus,theme:this.state.theme}):s.a.createElement($,{className:"widget",layoutWidth:e.w,readOnly:!this.state.layoutLocked,key:"item"+n,device:a,requestDeviceSpec:function(){return t.requestDeviceSpec(n)},deviceSpec:this.state.deviceSpecs[n],theme:this.state.theme}),s.a.createElement("div",{key:n,className:this.state.layoutLocked?"gridItem":"gridItem resizeable"},i)},Object(h.a)(n)),t={fontSize:100*n.state.zoom+"%"};return s.a.createElement(le,{layouts:{lg:n.state.layout},onDragStop:n.onLayoutChange,onResizeStop:n.onLayoutChange,isDraggable:!n.state.layoutLocked,isResizable:!n.state.layoutLocked,compactType:null,breakpoints:{lg:1200,md:996,sm:768,xs:480,xxs:0},cols:{lg:12,md:10,sm:8,xs:6,xxs:4},className:"layout",style:t,items:n.state.whitelist.length,rowHeight:100},e)}},n.state={menuOpen:!1,currentView:he.DASHBOARD,layoutLocked:!0,serverConfig:{mqttBrokerUrl:"",mqttLogin:"",mqttPassword:"",domoticzUrl:"",domoticzLogin:"",domoticzPassword:""},serverStatus:{mqtt:!1,domoticz:!1},lastMqttMessage:null,configId:0,configName:"",multiConfig:!1,devices:{},deviceSpecs:{},layout:[],whitelist:[],zoom:1,screensaverConfig:{delay:-1,type:"blank"},themeId:"Default",theme:{}},n.json=new v.a,n.json.setEventHandler(n.domoticzEventHandler),n.mqtt=new D,n.mqtt.setEventHandler(n.mqttEventHandler),n.store=new g.a,n.configHelper=new f,n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){var e=this.store.read("serverConfig"),t=this.store.read("themeId")||this.state.themeId,n=this.store.read("zoom")||this.state.zoom,a=this.store.read("screensaverConfig")||this.state.screensaverConfig,s=this.readConfigIdFromUrlParam(),i=this.configHelper.getConfigs(),o=this.configHelper.getConfig(s)||{},r=o.name||"Dashboard";this.setState({whitelist:o.whitelist||[],layout:o.layout||[],configId:s,configName:r,multiConfig:i.length>1,zoom:n,screensaverConfig:a,themeId:t,theme:re[t]||{}}),e&&this.setState({serverConfig:e}),this.setState({multiConfig:this.configHelper.getConfigs().length>1}),window.onpopstate=this.handlePopstate,this.updateDocumentTitle(r)}},{key:"componentDidMount",value:function(){this.connectClients(this.state.serverConfig),this.readSharedConfigFromUrl(),this.hasWhitelistedScenes()&&this.requestScenesStatus()}},{key:"componentWillUnmount",value:function(){this.json.setEventHandler(function(){}),this.mqtt.setEventHandler(function(){})}},{key:"connectClients",value:function(e){this.mqtt.connect(e.mqttBrokerUrl,e.mqttLogin,e.mqttPassword),this.json.setServerUrl(e.domoticzUrl,e.domoticzLogin,e.domoticzPassword)}},{key:"readConfigIdFromUrlParam",value:function(){var e=Number(document.location.search.slice(1));return e>=0&&Math.round(e)===e&&this.configHelper.getConfig(e)?e:0}},{key:"loadConfig",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.configHelper.getConfig(e);if(n){this.setState({configId:e,configName:n.name,layout:n.layout,whitelist:n.whitelist}),!t&&window.history.pushState({id:e},"","?"+e),this.setState({multiConfig:this.configHelper.getConfigs().length>1,layoutLocked:!0}),this.updateDocumentTitle(n.name);for(var a=0;a<n.whitelist.length;a++)this.requestDeviceStatus(n.whitelist[a])}else console.log("Unable to load config with id "+e)}},{key:"hasWhitelistedScenes",value:function(e){return(e||this.state.whitelist).some(function(e){return"s"===e[0]||"g"===e[0]})}},{key:"cleanupLayout",value:function(e){for(var t=[],n=-1,a=this.state.layout.filter(function(a){return t.push(a.i),n=Math.max(a.y,n),e.indexOf(a.i)>=0},this),s=0;s<e.length;s++){var i=e[s];t.indexOf(i)<0&&a.push({x:0,y:++n,w:2,h:1,i:i})}this.setState({layout:a}),this.storeConfigChange({layout:a})}},{key:"renderFooter",value:function(e){var t=this,n={background:this.state.theme.overlayBackground,color:this.state.theme.overlayText,fill:this.state.theme.menuIcon,fontSize:100*this.state.zoom+"%",height:50*this.state.zoom+"px",lineHeight:50*this.state.zoom+"px"};return s.a.createElement("div",{className:"footer"+(e?"":" hidden"),style:n},s.a.createElement("div",{className:"left"},this.state.layoutLocked&&this.state.multiConfig&&s.a.createElement("button",{title:"Previous Layout",onClick:this.getPrevConfig},s.a.createElement("svg",{className:"icon"},s.a.createElement("use",{xlinkHref:"#navigate-before"}))),!this.state.layoutLocked&&this.state.multiConfig&&s.a.createElement("button",{title:"Delete",onClick:this.deleteCurrentConfig},s.a.createElement("svg",{className:"icon"},s.a.createElement("use",{xlinkHref:"#delete"})))),s.a.createElement("div",{className:"right"},this.state.layoutLocked&&this.state.multiConfig&&s.a.createElement("button",{title:"Next Layout",onClick:this.getNextConfig},s.a.createElement("svg",{className:"icon"},s.a.createElement("use",{xlinkHref:"#navigate-next"}))),!this.state.layoutLocked&&s.a.createElement("button",{title:"Add a new dashboard",onClick:function(){return t.loadConfig(t.configHelper.addConfig())}},s.a.createElement("svg",{className:"icon"},s.a.createElement("use",{xlinkHref:"#add"})))),s.a.createElement("div",{className:"title"},this.state.configName))}},{key:"render",value:function(){var e=!this.state.serverConfig.mqttBrokerUrl||!this.state.serverConfig.domoticzUrl,t=this.renderCurrentView(e?he.SERVER_SETTINGS:void 0),n=this.state.currentView,a={fill:this.state.theme.menuIcon},i={fill:this.state.theme.menuIconSelected},o={background:this.state.theme.appBackground,color:this.state.theme.appText,fill:this.state.theme.appText},r={background:this.state.menuOpen?this.state.theme.overlayBackground:"",display:e?"none":""};document&&(document.body.style.background=this.state.theme.appBackground);var l=(n===he.DASHBOARD||n===he.DEVICE_LIST)&&(this.state.multiConfig||!this.state.layoutLocked);return s.a.createElement("div",{className:"App",style:o},s.a.createElement("div",{key:"menu",className:this.state.menuOpen?"appbar open":"appbar",style:r},s.a.createElement("button",{key:"toggle",title:"Menu",onClick:this.toggleMenu},s.a.createElement("svg",{className:"icon",style:a},s.a.createElement("use",{xlinkHref:"#settings"}))),n!==he.DASHBOARD&&s.a.createElement("button",{onClick:this.toMainView,title:"Home"},s.a.createElement("svg",{className:"icon",style:a},s.a.createElement("use",{xlinkHref:"#home"}))),n===he.DASHBOARD&&s.a.createElement("button",{onClick:this.toggleLayoutEdit,title:"Layout lock"},s.a.createElement("svg",{className:"icon",style:n===he.DASHBOARD?i:a},s.a.createElement("use",{xlinkHref:this.state.layoutLocked?"#lock":"#lock-open"}))),s.a.createElement("button",{onClick:this.toggleDeviceList,title:"Device selection"},s.a.createElement("svg",{className:"icon",style:n===he.DEVICE_LIST?i:a},s.a.createElement("use",{xlinkHref:"#playlist-add-check"}))),s.a.createElement("button",{onClick:this.toggleSettings,title:"Server settings"},s.a.createElement("svg",{className:"icon",style:n===he.SERVER_SETTINGS?i:a},s.a.createElement("use",{xlinkHref:"#router"}))),s.a.createElement("button",{onClick:this.toggleAbout,title:"About"},s.a.createElement("svg",{className:"icon",style:n===he.ABOUT?i:a},s.a.createElement("use",{xlinkHref:"#info-outline"})))),t,this.renderFooter(l),this.state.screensaverConfig.delay>=0&&s.a.createElement(ae.b,{type:this.state.screensaverConfig.type,delay:this.state.screensaverConfig.delay,theme:this.state.theme}))}}]),t}(a.Component),de=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function me(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}n(257);o.a.render(s.a.createElement(pe,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("","/service-worker.js");de?function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):me(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e):me(e)})}}()},26:function(e,t,n){},32:function(e,t,n){},34:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDE0IDc5LjE1Njc5NywgMjAxNC8wOC8yMC0wOTo1MzowMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTQgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QjU1N0I2MTJDNkIxMTFFNkI4NzZBMEZDRUJGNjJENEMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QjU1N0I2MTNDNkIxMTFFNkI4NzZBMEZDRUJGNjJENEMiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpCNTU3QjYxMEM2QjExMUU2Qjg3NkEwRkNFQkY2MkQ0QyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpCNTU3QjYxMUM2QjExMUU2Qjg3NkEwRkNFQkY2MkQ0QyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PihWDj4AAADvSURBVHja7NnBDYMwDIVhXLFAOkpX6NxdgVGaEdJyqdRLDjjENv59gUsUvU8Rwo601pbMdVuS1/p7e4nNUXg2qbUe2ruUIvtTsz79CQAAAAAAAAAAAAAAAAAAcpYwD2AeoJwHfPt5bU9uuTcfQQAAAAAAAAAAAAAAAACAeQDtsKIlVa3vrK2Pd7+VvnI73At/+W/AjPBuAWaFdwkwM7w7gNnhXQFYhHcDYBU+9J9g2e55AUaFDwkwMnw4gNHhQwGcET4MwFnh/9thbTcYtLgeH/YzY3g9zgkAAAAAAAAAAAAAAAAAAAA4PA9IWh8BBgC4WVSECBuukwAAAABJRU5ErkJggg=="},35:function(e,t,n){"use strict";(function(e){var a=n(1),s=n(2),i=function(){function t(){Object(a.a)(this,t);var n="localStorage"in e;if(this.ls=null,n){try{this.ls=e.localStorage,this.ls.setItem("localstorage.test-key","foo"),this.ls.removeItem("localstorage.test-key")}catch(s){n=!1}}else console.log("Localstorage not supported !")}return Object(s.a)(t,[{key:"write",value:function(e,t){this.ls&&this.ls.setItem(e,JSON.stringify(t))}},{key:"read",value:function(e){return this.ls?JSON.parse(this.ls.getItem(e)):null}},{key:"getKeys",value:function(){return this.ls?Object.keys(this.ls):[]}},{key:"delete",value:function(e){this.ls&&this.ls.removeItem(e)}}]),t}();t.a=i}).call(this,n(6))},36:function(e,t,n){"use strict";(function(e){var a=n(1),s=n(2),i=n(5),o=n(3),r=n(18),l=n(4),c=n(0),u=n.n(c),h=n(17),p=n.n(h),d=(n(242),1),m=function(t){function n(t){var s;return Object(a.a)(this,n),(s=Object(i.a)(this,Object(o.a)(n).call(this,t))).componentDidMount=function(){s.touchTarget=p.a.findDOMNode(Object(r.a)(s))},s.updateValue=function(t){s.setState({showBar:!0}),s.setState({value:t}),s.props.throttle?(e.clearTimeout(s.state.throttleTimeoutId),s.setState({throttleTimeoutId:e.setTimeout(s.emitChange,s.props.throttle)})):s.emitChange(t),e.clearTimeout(s.state.fadeTimeoutId),s.setState({fadeTimeoutId:e.setTimeout(s.fadeBar,1e3)})},s.emitChange=function(e){s.props.onChange(void 0!==e?e:s.state.value)},s.onTouchStart=function(e){s.props.disabled||s.setState({touchStartData:{x:e.touches[0].pageX,y:e.touches[0].pageY,rect:s.touchTarget.getBoundingClientRect()},ignoringMove:!1})},s.onTouchMove=function(e){if(!s.props.disabled&&!s.state.ignoringMove){var t=e.changedTouches[0],n=Math.atan2(t.pageY-s.state.touchStartData.y,t.pageX-s.state.touchStartData.x);if(Math.abs(Math.abs(n)-Math.PI/2)<=d)s.setState({ignoringMove:!0});else{var a=(t.pageX-s.state.touchStartData.rect.left)/s.state.touchStartData.rect.width,i=Math.min(1,Math.max(a,0));s.state.value!==i&&s.updateValue(i)}}},s.onTouchEnd=function(){s.setState({touchStartData:null})},s.onClick=function(e){if(!s.props.disabled){var t=s.touchTarget.getBoundingClientRect(),n=(e.pageX-t.left)/t.width;n>=1-(void 0!==s.props.edgeTolerance?s.props.edgeTolerance/2:.06)&&(n=1),s.updateValue(n)}},s.fadeBar=function(){s.setState({showBar:!1})},s.state={throttleTimeoutId:null,touchStartData:null,ignoringMove:!1,fadeTimeoutId:null,showBar:!1,value:s.props.value},s.touchTarget=null,s}return Object(l.a)(n,t),Object(s.a)(n,[{key:"render",value:function(){var e=100*this.state.value;return u.a.createElement("div",{className:"Slider",onClick:this.onClick,onTouchStart:this.onTouchStart,onTouchMove:this.onTouchMove,onTouchEnd:this.onTouchEnd},u.a.createElement("div",{className:"bar",style:{transform:"translateX("+e+"%)",transition:this.state.touchStartData?"none":void 0,opacity:this.state.showBar?1:0}}))}}]),n}(c.Component);t.a=m}).call(this,n(6))},85:function(e,t){}},[[109,1,2]]]);
//# sourceMappingURL=main.d59f3752.chunk.js.map